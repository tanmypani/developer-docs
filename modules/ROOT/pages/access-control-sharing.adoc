= Access control and sharing
:toc: true
:toclevels: 1

:page-title: Access control and sharing
:page-pageid: access-control-sharing
:page-description: Access to content is controlled via sharing

Access control in ThoughtSpot is accomplished via *sharing* of content *authored* by one user to other users and groups.

In practice, administrators create specific *access control groups* to grant either *read-only* or *edit* access to content, then add users to the appropriate groups. This can be done via UI, but most often is automated via REST API or JIT provisioning during SSO.

Group membership also controls which users can see each other when sharing, through a property called *shareability*.

== Sharing model overview
The user who creates content always has access to the content they are the *author* of. 

The *author* of content is a single user, not a group. Authorship of content can be transferred from one user to another by an administrator account.

Users other than the *author* can only view and access content if it has been *shared* to them directly or to a group they belong to.

Users *do not see the group* that provides them access to a given piece of content (the same content could be shared to multiple groups they belong to, or to them directly as well), nor do they see who shared content to them individually, although they can see the *author* of any content.

=== Sharing content
ThoughtSpot users can share objects such as Liveboards, answers, tables, worksheets, and table columns. 

Sharing provides  either `read-only` or `edit` permissions on an object 



When an object is shared, users can view all the data regardless of the permissions set at the parent object level. For example, a user can view a shared Liveboard without having access to its underlying worksheet or table from which the visualizations in the Liveboard are built. However, there are some features of a Liveboard which do require at least `read-only` permissions on the underlying worksheet.

[NOTE]
====
If your application instance has classic Answer Experience enabled, administrators can restrict user access to Liveboards by selecting the *Cannot create or update Liveboards*  checkbox in the admin UI. Note that this feature is deprecated on clusters on which the New Answer Experience is enabled. ThoughtSpot recommends that you use the `disabledActions` and `hiddenActions` parameters in the Visual Embed SDK to define granular access. For more information, see xref:embed-actions.adoc[Show or hide actions].
====

A user can automatically share objects with anyone else in the groups to which they belong.

=== Sharing visibility

The Sharing visibility configuration allows users and groups to be set as *SHAREABLE* or *NOT SHAREABLE*.

image::./images/shareable_groups_users.png[Shareability with groups and users]

If a user group is set as *SHAREABLE*, it appears in the *Share* dialog when a user tries to share an object.

The *SHAREABLE* property of a group affects the visibility of users who belong to that group. If _UserA_ is marked as *SHAREABLE*, other users *in the same group* as _UserA_ will see _UserA_ in the *Share* dialog when they try to share an object.

A user with *administrator* privileges can share any content to any user or group regardless of their visibility. This allows for using a *NOT SHAREABLE* group as an *access control group*.

[NOTE]
====
Avoid using the same group for sharing permissions and other privileges. Because a user can share with anyone in a group they belong to, they can potentially share restricted data.
====

== Sharing via UI
Within the ThoughtSpot UI, there is are buttons or menu items for triggering the sharing dialogs for every type of object (link:https://docs.thoughtspot.com/cloud/latest/share-liveboards#share-liveboardpage[Liveboards, target=_blank] or link:https://docs.thoughtspot.com/cloud/latest/share-worksheets[wroksheets, target=_blank] for example).


== Sharing via REST API


== Auditing access control
Sharing details are not returned via the responses from the */metadata/search* endpoints. Instead, there are two REST API endpoints under the */security/* for retrieving access control details.

Using the link:https://developers.thoughtspot.com/docs/restV2-playground?apiResourceId=http%2Fapi-endpoints%2Fsecurity%2Fassign-change-author[/security/metadata/fetch-permissions, target=_blank] endpoint on an object will return the *realized permissions* the total set of groups and the users within those groups who have access to the object. 

== Re-assign content author
The *author* of any object can be re-assigned using the V2.0 link:https://developers.thoughtspot.com/docs/restV2-playground?apiResourceId=http%2Fapi-endpoints%2Fsecurity%2Fassign-change-author[/security/metadata/assign, target=_blank] REST API endpoint:

[code,json]
----
{
  "metadata": [
    {"identifier": "1ef11b25-9a95-4f03-9287-83010374962d"},
    {"identifier": "3f5d2d4b-87da-4f59-a144-85d444eada18"}
  ],
  "user_identifier": "reports_service_account_username"
}
----

Often rather than re-assigning authorship, a designated *service account user* is used when importing TML objects via REST API into a different Org or ThoughtSpot instance, establishing the user used for the import process as the *author* within that environment.

